---
slug: /show-cases/typescript-lambda
sidebar_position: 30
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from "@theme/CodeBlock";
import AppTsx from "!!raw-loader!./my-lambda.tsx";
import AlbHandlerTs from "!!raw-loader!./src/lambdas/alb-handler.ts";
import ApiGatewayHandlerTs from "!!raw-loader!./src/lambdas/api-gateway-handler";
import DinghyConfigYml from "!!raw-loader!./dinghy.config.yml";
import TfJson from "!!raw-loader!./output/my-lambda/stack.tf.json";

# TypeScript Lambda

Deploy TypeScript lambda to AWS with ease.

## Features

- Write AWS Lambda functions in TypeScript
- TypeScript is automatically transpiled and bundled into JavaScript using `deno bundle`.
- Automatically bundle source code and other files into .zip archives for Lambda deployment
- Automatically creates a dedicated IAM role for each Lambda function


## Source Code

<Tabs>
  <TabItem value="my-lambda.tsx">
    <CodeBlock language="tsx" showLineNumbers>
      {AppTsx}
    </CodeBlock>
  </TabItem>
  <TabItem value="dinghy.config.yml">
    <CodeBlock language="yaml" showLineNumbers>
      {DinghyConfigYml}
    </CodeBlock>
  </TabItem>
  <TabItem value="alb-handler.ts">
    <CodeBlock language="ts" showLineNumbers>
      {AlbHandlerTs}
    </CodeBlock>
  </TabItem>
  <TabItem value="api-gateway-handler.ts">
    <CodeBlock language="ts" showLineNumbers>
      {ApiGatewayHandlerTs}
    </CodeBlock>
  </TabItem>
</Tabs>

## Outputs

<Tabs>
  <TabItem value="Overview" default>
    ![](./output/my-lambda.png#drawio-w-50)
  </TabItem>
  <TabItem value="All View">
    All elements without filter ![](./output/my-lambda-all.png#drawio-w-100)
  </TabItem>
  <TabItem value="Terraform">
    <CodeBlock language="json" title="stack.tf.json" showLineNumbers>
      {TfJson}
    </CodeBlock>
  </TabItem>
</Tabs>

### Resource types

List of resource types used by this stack, in approximate order of creation:

1. [aws_lambda_function](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lambda_function)
1. [aws_iam_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role)
1. [data.archive_file](https://registry.terraform.io/providers/hashicorp/archive/latest/docs/data-sources/file)


## Steps to try

### [Install dinghy-cli](/guides/get-started/installation)

If you haven't already:

```sh
curl -fsSL https://get.dinghy.dev/install.sh | sh
```

Sample Screenshot
![](../../../guides/get-started/screenshot-install.png#drawio-w-100)

### Prepare source code

Create `my-lambda.tsx` and other files with content from [above](#source-code).

```sh
curl -fsSL --create-dirs -o typescript-lambda/my-lambda.tsx https://raw.githubusercontent.com/dinghydev/dinghy/main/sites/www/src/docs/examples/show-cases/typescript-lambda/my-lambda.tsx
curl -fsSL --create-dirs -o typescript-lambda/dinghy.config.yml https://raw.githubusercontent.com/dinghydev/dinghy/main/sites/www/src/docs/examples/show-cases/typescript-lambda/dinghy.config.yml
cd typescript-lambda

curl -fsSL --create-dirs -o src/lambdas/alb-handler.ts https://raw.githubusercontent.com/dinghydev/dinghy/main/sites/www/src/docs/examples/show-cases/typescript-lambda/src/lambdas/alb-handler.ts
curl -fsSL --create-dirs -o src/lambdas/api-gateway-handler.ts https://raw.githubusercontent.com/dinghydev/dinghy/main/sites/www/src/docs/examples/show-cases/typescript-lambda/src/lambdas/api-gateway-handler.ts
```

### Preview the actions

Run [`dinghy tf diff`](https://dinghy.dev/references/commands/engine/tf/diff) to preview the Terraform actions that will be performed.

:::info

Make sure your [AWS credentials](https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html#configure-precedence) are configured before interacting with AWS services.

:::

```sh
dinghy tf diff
```

Sample Screenshot
![](./screenshot-diff.png#drawio-w-100)

### Apply the actions

Run [`dinghy tf deploy`](https://dinghy.dev/references/commands/engine/tf/deploy) to apply the changes and provision your resources.

```sh
dinghy tf deploy
```

Sample Screenshot
![](./screenshot-deploy.png#drawio-w-100)

### Invoke the lambdas

To test your newly deployed Lambda functions, use the [`dinghy aws`](https://dinghy.dev/references/commands/engine/aws) command.

```sh
dinghy aws lambda invoke --function-name api-gateway-handler.ts  --region us-east-1--cli-binary-format raw-in-base64-out --payload "{\"key\":\"value\"}" response.json
dinghy aws lambda invoke --function-name alb-handler --region us-east-1 --cli-binary-format raw-in-base64-out --payload "{\"key\":\"value\"}" response.json
```

Sample Screenshot
![](./screenshot-invoke.png#drawio-w-100)

### Destroy resources

After experimenting, run [`dinghy tf destroy`](https://dinghy.dev/references/commands/engine/tf/destroy) to remove all resources created in the previous steps.
